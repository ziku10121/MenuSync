(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"043b":function(t,e,s){},"378d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("q-page",{staticClass:"column items-center justify-start"},[e("div",{staticClass:"py-30"},[0!=t.data.menu1.length?e("div",{staticClass:"viewContainer"},[e("div",{staticClass:"row q-pt-md q-px-md items-center menuInfo"},[e("div",{staticClass:"col-auto"},[e("img",{staticClass:"logo",staticStyle:{"max-width":"220px","max-height":"110px"},attrs:{src:t.data.b64img}})]),e("div",{staticClass:"col"})]),e("div",{staticClass:"row q-pt-sm q-pb-md q-px-md menuBtn"},[e("div",{staticClass:"col-auto"},[e("q-btn",{on:{click:function(e){return t.$router.go(-1)}}},[e("q-icon",{attrs:{name:"reply"}}),e("div",[t._v("返回")])],1)],1),e("div",{staticClass:"col"}),e("div",{staticClass:"col-auto"},[e("q-btn",{staticClass:"q-mr-md",on:{click:t.saveFile}},[e("q-icon",{staticClass:"q-pr-xs",attrs:{name:"file_download"}}),e("div",[t._v("下載")])],1),e("q-btn",{staticClass:"q-mr-none",on:{click:t.printBtn}},[e("q-icon",{staticClass:"q-pr-xs",attrs:{name:"print"}}),e("div",[t._v("列印")])],1)],1)])]):t._e(),e("div",{staticClass:"my-card new-page"},[e("table",[e("thead",[e("tr",t._l(t.columns,(function(s){return e("td",{key:s.goods_no,class:s.class,style:s.style},[t._v(t._s(s.label))])})),0)]),e("tbody",t._l(t.data.menu1,(function(s){return e("tr",{key:s.goods_no,staticClass:"text-center"},[e("td",{staticClass:"no-print font_goodsNo"},[t._v(t._s(s.goods_no))]),e("td",{staticClass:"text-left font_category"},[t._v(t._s(s.new_cat))]),e("td",{staticClass:"text-left font_name"},[t._v(t._s(s.goods_name))]),e("td",{staticClass:"font_price"},[t._v(t._s(s.sale_price))]),t._l(parseInt(t.data.qty),(function(s){return e("td",{key:s,staticClass:"box-border no-padding"},[e("q-btn",{style:{width:t.boxW+"px",height:t.boxH+"px"},attrs:{outline:"",color:"black",size:"6px"}})],1)})),t._l(t.data.taste,(function(a){return e("q-td",{key:a.taste_name,staticClass:"box-border no-padding"},[t.data.setting.isTaste&&t.isRenderTaste(s.realtaste,a)?e("q-btn",{style:{width:t.boxW+"px",height:t.boxH+"px"},attrs:{outline:"",color:"black",size:"6px"}}):t._e()],1)}))],2)})),0)])]),0!=t.data.menu1.length?e("div",{staticClass:"view2Container"},[e("div",{staticClass:"row q-pa-md items-center menuInfo"},[e("div",{staticClass:"col-auto"},[e("img",{staticClass:"logo",staticStyle:{width:"320px","max-height":"120px"},attrs:{src:""}})]),e("div",{staticClass:"col"})]),e("div",{staticClass:"row q-pa-md menuBtn"},[e("div",{staticClass:"col-auto"},[e("q-btn",{on:{click:function(e){return t.$router.go(-1)}}},[e("q-icon",{attrs:{name:"reply"}}),e("div",[t._v("返回")])],1)],1),e("div",{staticClass:"col"}),e("div",{staticClass:"col-auto"},[e("q-btn",{staticClass:"q-mr-md",on:{click:t.saveFile}},[e("q-icon",{staticClass:"q-pr-xs",attrs:{name:"file_download"}}),e("div",[t._v("下載")])],1),e("q-btn",{staticClass:"q-mr-none",on:{click:t.printBtn}},[e("q-icon",{staticClass:"q-pr-xs",attrs:{name:"print"}}),e("div",[t._v("列印")])],1)],1)])]):t._e(),e("div",{staticClass:"my-card"},[e("table",[e("thead",[e("tr",t._l(t.columns,(function(s){return e("td",{key:s.goods_no,staticClass:"no-view",class:s.class,style:s.style},[t._v(t._s(s.label))])})),0)]),e("tbody",t._l(t.data.menu2,(function(s){return e("tr",{key:s.goods_no,staticClass:"text-center"},[e("td",{staticClass:"no-print font_goodsNo"},[t._v(t._s(s.goods_no))]),e("td",{staticClass:"text-left font_category"},[t._v(t._s(s.new_cat))]),e("td",{staticClass:"text-left font_name"},[t._v(t._s(s.goods_name))]),e("td",{staticClass:"font_price"},[t._v(t._s(s.sale_price))]),t._l(parseInt(t.data.qty),(function(s){return e("td",{key:s,staticClass:"box-border no-padding"},[e("q-btn",{style:{width:t.boxW+"px",height:t.boxH+"px"},attrs:{outline:"",color:"black",size:"6px"}})],1)})),t._l(t.data.taste,(function(a){return e("q-td",{key:a.taste_name,staticClass:"box-border no-padding"},[t.data.setting.isTaste&&t.isRenderTaste(s.realtaste,a)?e("q-btn",{style:{width:t.boxW+"px",height:t.boxH+"px"},attrs:{outline:"",color:"black",size:"6px"}}):t._e()],1)}))],2)})),0)])]),e("div",{staticClass:"btngroup"},[e("div",{staticClass:"column"},[e("q-btn",{staticClass:"col q-mb-md bg-primary text-white",attrs:{size:"18px"},on:{click:t.doMenuFormat}},[e("div",[t._v("下一步")])]),e("q-btn",{staticClass:"col q-mb-md bg-red-14 text-white",attrs:{size:"18px"},on:{click:function(e){return t.$router.push({name:"main"})}}},[e("div",[t._v("結束")])])],1)])])])},n=[],i=(s("21a6"),{name:"Preview",data(){return{columns:[{name:"goods_no",required:!0,label:"菜號",field:t=>t.goods_no,class:"no-print",style:"width: 20px"},{name:"new_cat",label:"類別",field:"new_cat",class:"yes-print",style:"width: 85px; "},{name:"goods_name",label:"菜名",field:"goods_name",class:"yes-print",style:""},{name:"sale_price",label:"價錢",field:"sale_price",class:"yes-print",style:"width: 70px;"}],data:{},fileObj:null,boxW:0,boxH:0}},created(){let t=sessionStorage.getItem("menuFormat");void 0!=t&&null!=t&&null!=t||this.$router.push({path:"makeMenu"}),this.data=JSON.parse(t),console.log("menu data",this.data),window.addEventListener("afterprint",(t=>{console.log("After print")})),window.addEventListener("beforeprint",(t=>{console.log("Before print")}))},mounted(){if(void 0==this.data||null==this.data)return;this.previewProcess(this.data);const t=document.documentElement;this.data.menu2.length>0&&t.style.setProperty("--viewOrderType","none");let e=this.data.menu1.length+this.data.menu2.length;e>50?(t.style.setProperty("--fontName","18px"),t.style.setProperty("--fontPrice","18px"),t.style.setProperty("--fontCategory","18px")):e>=40&&e<50?(t.style.setProperty("--fontName","22px"),t.style.setProperty("--fontPrice","20px"),t.style.setProperty("--fontCategory","20px")):e<40&&(t.style.setProperty("--fontName","24px"),t.style.setProperty("--fontPrice","24px"))},beforeDestroy(){},methods:{previewProcess(t){if(null==t||void 0==t)return;let e=Math.ceil(1050/t.menu1.length)+"px";const s=document.documentElement;if(s.style.setProperty("--viewHeight",e),null!=t.qty&&void 0!=t.qty)for(let a=0;a<t.qty;a++){let e={};e.name=(a+1).toString(),e.label="0"==t.setting.qtyType?(a+1).toString():"份量",e.field=(a+1).toString(),e.class="yes-print",this.columns.push(e)}if(t.setting.isTaste&&null!=t.taste&&void 0!=t.taste)for(let a=0;a<t.taste.length;a++){let e={};e.name=t.taste[a].taste_name.toString(),e.label=t.taste[a].taste_name.toString(),e.field=t.taste[a].taste_name.toString(),e.class="yes-print",this.columns.push(e)}this.boxW=this.data.boxSize.width/100*50,this.boxH=parseInt(e)*(this.data.boxSize.height/100)},isRenderTaste(t,e){for(let s=0;s<t.length;s++)if(t[s].taste_no==e.taste_no)return!0;return!1},printBtn(){window.print()},saveFile(){this.updateData();let t=this.data.menu1.length+this.data.menu2.length,e=JSON.stringify(this.data),a=s("21a6"),n=new Blob([e],{type:"text/plain;charset=utf-8"});a.saveAs(n,"myMenu"+t+".json")},updateData(){let t=document.querySelector("tbody tr .box-border");this.data.margin={},this.data.tdSize={},this.data.tdSize.width=t.offsetWidth,this.data.tdSize.height=t.offsetHeight,this.data.margin.x=(t.offsetWidth-this.boxW)/2,this.data.margin.y=Math.round((t.offsetHeight-this.boxH)/2*100)/100},doMenuFormat(){this.updateData(),sessionStorage.setItem("menuFormat",JSON.stringify(this.data)),this.$router.push({path:"capture"})}}}),o=i,l=(s("e7aa"),s("cf4c"),s("2877")),r=s("9989"),d=s("9c40"),c=s("0016"),p=s("db86"),u=s("eaac"),m=s("eebe"),h=s.n(m),_=Object(l["a"])(o,a,n,!1,null,"9d78ef36",null);e["default"]=_.exports;h()(_,"components",{QPage:r["a"],QBtn:d["a"],QIcon:c["a"],QTd:p["a"],QTable:u["a"]})},a45a:function(t,e,s){},cf4c:function(t,e,s){"use strict";s("043b")},e7aa:function(t,e,s){"use strict";s("a45a")}}]);